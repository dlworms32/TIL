# 21-09-16 Shell과 파일

## 1. CLI 쉘 만들기
* `stdlib.h`에 있는 `system()` 함수로 bash 쉘 기능을 수행할 수 있다.
* SSAFY 쉘 만들기
  * 기능
    * 현재 날짜 출력 : `date`
    * 사용 시간 출력 : `uptime`
    * 커널 메시지 버퍼 출력 : `log`
    * 명령어 입력 내역 출력 : `history`
    * 명령어 번호 다시 실행 : `history [번호]`
    * 명령어 입력 내역 삭제 : `hclear`
    * 매크로 변수 추가 : `[변수명]=[값]`
    * 매크로 변수 값 출력 : `echo [변수명]`
    * 종료 : `exit`
---
## 2. 리눅스 파일 시스템
* 파일 종류 확인 : `ls -al`의 결과의 맨 첫 글자
  * `-` : 정규 파일(regular file)
  * `b` : 블록 디바이스 파일(block device file)
  * `c` : 문자 디바이스 파일(character device file)
  * `d` : 디렉토리 파일(directory file)
  * `l` : 링크 파일(link file)
* 리눅스 파일의 종류
  * regular 파일
    * 일반 파일
  * directory 파일
    * 리눅스에서는 디렉토리도 파일로 관리한다.
  * symbolic link file
    * 바로가기 역할의 파일
  * device file
    * 하드웨어 장치에 접근하기 위한 파일
    * __리눅스는 장치를 파일로 제어한다.__ (굉장히 중요하고 긴 내용)
    * 임베디드 리눅스 개발자는 device file을 통해 임베디드를 제어한다.
* 파일 종류 확인 : `file [파일명]`
  * ELF 파일 : 리눅스 바이너리 파일의 Format 이름
    * 0과 1로 이뤄진 바이너리 파일 내부에 어떤 정보인지 나타내는 규격화된 표준
  * character special 또는 block special은 device file을 나타낸다.
* 명령어 위치 확인 : `which [파일명]`
* 리눅스는 실행파일보다 바이너리 파일이라는 말을 더 많이 사용한다.
* apt로 설치하는 패키지는 /usr에 설치 된다. (sl 패키지를 설치하고, `which sl`로 위치를 확인해보기)
---
## ?. 심볼릭 링크
* 심볼릭 링크(바로가기) 만들기 : `ln -s [파일명] [링크파일명]`

---
## ?. 파일 소유권
* 혼자 쓰는 Host에서는 중요도가 낮다.
* 여러 사람이 쓰는 Host에서는 소유자가 어떤 User인지, 어떤 Group의 파일인지 구분한다.
* 파일 소유 User와 파일 소유 Group은 __독립적__
  * abs.txt의 파일의 소유자는 회계팀의 철수이고, 그룹 소유자는 감사팀일 수 있다.
* 파일 소유권 변경 : `sudo chown [소유자]:[그뤁] [파일명]`
* 소유 유저만 바꾸기 : `sudo chown [소유자] [파일명]`
* 그룹 추가 하기 : `sudo addgroup [그룹명]`
* 그룹 삭제 하기 : `sudo delgroup [그룹명]`
---
## ?. 파일 권한
* 여러 사람이 사용하는 Host에서는 권한의 의미가 크다
  * 해킹 방지를 위한 철저한 권한 설정 필요
* 파일 권한 확인 : `ls -al`
  * 파일 종류 문자 뒤 9글자로 파일 권한 확인
    * 첫 3글자 : 소유자 권한
    * 중간 3글자 : 소유 그룹 권한
    * 마지막 3글자 : 이외 사용자들의 권한
  * ex) rwxr-xr-x
    * 소유자 : 읽기, 쓰기, 실행 가능
    * 소유자 그룹 : 읽기, 실행 가능
    * 이외 사용자 : 읽기, 실행 가능
* 파일 권한 변경 (여러가지 방법이 있다)
  * 이진수 표현 : `sudo chmod 000 [파일명]` 
    * r : 4
    * w : 2
    * x : 1
  * 권한을 읽기, 쓰기, 실행 권한을 더해서 부여
  * ex) `sudo chmod 777 ./test.txt` : 모든 사용자에게 읽기,쓰기,실행 권한 부여
  * ex) `sudo chmod 754 ./test.txt` : 파일 소유자에게 모든 권한, 그룹 사용자에게 읽기 실행 권한, 이외 사용자에게 읽기 권한 부여
* 실행권한
  * 바이너리 파일은 실행 권한만 있으면 실행 가능
---
## ?. 디렉토리 권한
* 디렉토리의 read 권한 : `ls`로 디렉토리 내부 파일 확인 가능
* 디렉토리의 write 권한 : 디렉토리 내 파일 생성, 삭제 권한
* 디렉토리의 excute 권한 : 디렉토리 내부로 진입 여부 결정
* 디렉토리 내 명령어가 안될 때 위 권한을 잘 생각해보자.