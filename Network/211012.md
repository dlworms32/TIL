# 리눅스 네트워크 프로그래밍
## 1. Network 기본
* 인터넷 원리
  * 네트워크 : 노드(컴퓨팅 장치들)와 링크(연결)로 구성한 데이터 교환망
  * Node 의 ID(IP 주소) : IPv4 / IPv6
  * Node 끼리의 연결
    * 랜카드로 직접 연결 - PC 개수가 늘어나면 랜카드가 많이 필요
  * 공유기의 사용
    * PC끼리 연결하지 않고, 공유기를 거쳐 연결
* 인터넷 해저 케이블
  * 바다에 선을 연결, 전 세계가 연결됨
* 인공위성 vs 해저 케이블
  * 밀림 / 외딴 섬 / 사막 -> 직접 연결 불가
  * 무선 인터넷 가능
    * 느림, 신호가 잘 끊김
    * 매우 비쌈
* 스페이스 X의 스타링크 프로젝트
  * 여러개의 위성을 통해 무선 인터넷 서비스
* 여러가지 인터넷 서비스
  * Google의 열풍선
  * Facebook의 드론
## 2. 서버와 DNS
* DNS(Domain Name System)
  * IP 주소를 사람이 이해하기 쉬운 도메인 주소로 변환
## 3. 웹서버 운영하기
1. nginx Windows 설치
2. nginx.exe 실행 (실행 : cmd - `start nginx.exe`)
3. html 디렉토리 내 index.html 파일 수정
4. localhost로 접속
5. cmd - `ipconfig` IP 확인 후 IP로 접속하기
6. ipaddress.com에 접속해 실제 IP 주소 확인
7. 공인 IP로 접속 -> 접속되지 않음
8. 포트 포워딩 (__iptime 로그인 실패...__)
9. 공인 IP로 다시 접속 -> 접속 성공
10. 내도메인.한국 -> 무료 도메인 설정(회원가입 하기)
11. IP 설정 후, 도메인으로 접속해보기
12. 종료 cmd - `nginx.exe -s quit`
## 4. 네트워크 분류
* LAN(Loacl Area Network)
  * 랜카드 : 근거리 통신망을 위한 네트워크 카드
  * 랜 케이블 : 근거리 통신용 케이블
  * 집안 / 사무실 / 소규모 공장 수준
* WAN(Wild Area Network)
  * LAN보다 넓은 네트워크
  * * 구축 비용 비쌈
  * 기업 지사끼리 연결된 네트워크, 대규모 공장 
* 규모 
  * Internet > WAN > LAN
* Cell
  * 무선 이동통신을 위해 하나의 기지국이 포괄하는 범위
* Cellular
  * 한 지역을 여러개의 셀로 분할하여 운용하는 통신 방식
  * 주파수를 알뜰하게 쓰기 위함
  * 주파수 대역 - 이용하는 사람이 많아질수록 대역폭이 많이 필요
* IoT에서 네트워크 구분
  * default 통신 방식 : 무선 네트워크
    * 네트워크 규모, 특징에 따라 필요한 속도, 가격이 다름
  * 무선 LAN : Wifi / BLE
    * 지역 네트워크, 기본적으로 인터넷 X
    * 라우터를 통한 인터넷 연결 가능 (ISP와 연결시)
  * 실외 : Cellular - LTE / 5G
    * Cellular 네트워크를 사용하면 인터넷 가능
  * 무선 WAN(LPWAN : Low Power WAN)
    * 기본적으로 인터넷 X
    * ISP와 연결시 인터넷 사용 가능
* Internet - 가장 거대한 네트워크
  * ISP 업체 신청, 전용선 + IP 사용
* ISP(Internet Service Provider) 업체
  * KT
  * SK 브로드밴드
  * LG U+
  * 세종 텔레콤 등등
# 프로토콜의 이해
## 1. Protocol의 이해
* 프로토콜
  * 통신을 위해 양 상호간 지켜야 할 약속 약속
  * 통신의 두 주체가 같은 프로토콜을 사용하면, 규칙적으로 통신 가능
  * H/W
    * 장비 규칙
    * 신호 전달 속도 등
  * Format
    * 신호의 형태
  * Sequence
    * TCP/IP의 Handshake 방식
    * 신호 전달 순서
  * S/W 동작
    * 오류 검출을 위한 행동
* 프로토콜 공부 이유
  * 완벽한 통신 Application 제작 가능
  * 통신 App을 위한 Library 제작 가능
* [프로토콜 만들기](https://github.com/dlworms32/TIL/blob/master/Network/my_protocol.cpp)
  * 2진수 메시지 작성시 -> 영문 메세지 출력
    * `00001100110100011110101111011101110011111110010011110011`
    ![image](https://user-images.githubusercontent.com/49888128/147405607-e088a70d-53ef-4c5b-b9ee-c92df878c095.png)
  * 영문 메세지 -> 2진수 메시지 출력
    * `hungry`
    ![image](https://user-images.githubusercontent.com/49888128/147405597-0e2eb966-7c3d-4463-9a53-77a108289af3.png)
  * 최대 글자 수 128글자 영문 대 소문자만 전송 가능
  * 팀원과 결정한 프로토콜(2진수)
    * 첫 8bit : 글자 수 bit
    * 나머지 8bit 기준 7bit ASCII 코드, 1bit 짝수 페리티 코드
## 2. TCP / IP 이해
* IP(Internet Protocol)
  * 송신 호스트와 수신 호스트가 정보를 주고 받는데 사용하는 규약
  * 패킷 혹은 데이터그램이라고 하는 덩어리로 나뉘어 전송
  * 비 신뢰성
    * 통신 도중 패킷이 사라질 수 있음
    * 패킷의 순서를 보장하지 않음
  * 비 연결성
    * 패킷을 받을 대상이 없거나 해당 도착지의 주소가 불능 상태여도 패킷 전송
* TCP(Transmission Control Protocol)
  * 전송 제어 프로토콜
  * 연결 지향 (3way handshake)
  * 데이터 전달 보증
  * 순서 보장
  * 신뢰할 수 있는 프로토콜
* UDP(User Datagram Protocol)
  * 기능이 거의 없음
  * 데이터 전달, 순서 보장 X
  * 속도가 빠름(제약이 없기 때문)
# Ethernet
## 1. Ethernet 통신 방법
* 이더넷 O, X퀴즈
  * 이더넷은 옛날 방식, 인터넷은 최근 방식
    * X
    * 규모가 작은 LAN에서는 이더넷 통신을 함
    * 이더넷은 인터넷과 연결될 수도, 아닐수도 있음
  * 이더넷은 IP로 통신한다
    * X
    * LAN은 MAC 주소 기반 통신
  * 이더넷은 TCP / IP 프로토콜을 사용한다
    * X
    * CSMA/CD 프로토콜 사용(MAC 주소 기반 통신)
  * 이더넷을 위한 장비가 따로 존재한다
    * O
    * 이더넷 카드와 이더넷 케이블 필요
* Ethernet
  * LAN 통신의 표준(IEEE 802.3)
    * 토큰링, FDDI등 다른 통신이 존재
    * 대부분 이더넷을 사용
  * __CSMA/CD 프로토콜__ 사용
  * 이더넷 카드 장비가 필요
  * 이더넷 케이블을 사용하는 통신 방법 
* Ethernet Card / NIC
  * NIC : Network Interface Controller
  * 컴퓨터와 네트워크를 연결시키키 위한 카드
  * 대부분 메인보드에 내장
## 2. Ethernet 케이블
* bit rate
  * 초당 몇 bit를 전송하는지
  * 단위는 bps
* 대역폭(통신)
  * 한번에 데이터를 전송할 수 있는 양
* Ethernet Cable
  * UTP(Unshielded Twisted-Pair) Cable
    * 이더넷의 주류를 이루는 케이블
  * STP(Shielded Twisted-Pair)
    * 방해 전파(EMI) 방지를 위한 호일을 한번 더 감은 고급 케이블
* 케이블 전송 스펙
  * CAT5e
    * 1 Gbps
    * 100 MHz 대역폭
  * CAT6
    * 1 Gbps
    * 250 MHz 대역폭
  * CAT7
    * 10 Gbps
    * 600 MHz 대역폭
* UTP 케이블 종류
  * 다이렉트 케이블(많이 사용)
  * 크로스 케이블
  * 잘못 사용하면 통신이 되지 않음
  * Auto MDI
    * S/W가 케이블 순서를 자동으로 보정해줌
    * 저렴한 임베디드 보드는 지원하지 않기 때문에 확인 필요
## 3. CSMA / CD
* CSMA/CD 프로토콜
  * LAN에서 통신하는 방식
  * 하나의 노드에서 다른 노드로 신호를 보낼 때 마다 모든 노드에 같은 신호를 보냄(공유기 없이 LAN을 구성한 경우)
* CSMA/CD 프로토콜 동작 방식
  1. 현재 네트워크에 통신이 되고 있는지 확인
  2. 사용 가능할 때까지 랜덤한 기간 대기
  3. 통신이 안되고 있으면 통신 시작
  4. 충돌이 발생한다면, 랜덤 시간 이후 재전송
* 콜리젼 도메인
  * 충돌이 발생할 수 있는 네트워크 범위
  * LAN 네트워크는 모두 같은 콜리젼 도메인을 가짐
  * 연결된 기기(노드)가 많을수록 통신 효율이 떨어짐
## 4. Ethernet 장비
* 공유기
  * Home Router
  * 가정에서 필요한 여러 네트워크 장비를 통합한 가정용 라우터
  * 한계
    * 연결 포트가 적음
    * 여러개 다량 연결하면 속도, 안정성이 떨어짐
    * 전용선 속도 커버 못함
* 리피터
  * 통신 거리가 멀어지면 신호가 약해짐
  * 신호를 읽고 신호 세기를 증폭, 잡음을 제거해줌
  * 다른 장치에 리피터 기능이 포함돼있음
* 이더넷 허브
  * 멀티포트 리피터 / 허브라고 부름
  * 연결된 신호를 보내면 모든 노드에 복사해 전달
  * CSMA / CD 프로토콜 사용
* 스위치
  * 스위칭 허브
  * 평소에 각 포트별 어느 MAC이 연결되었는지 저장
  * 신호를 분석, 어느 MAC을 찾는지 알아내 전달
* 라우터
  * 내부 네트워크 연결 + 외부 네트워크 연결 가능
  * 내부 데이터를 외부로 보내는 출구
* 네트워크 구성
  * ISP 업체에 전용 회선과 IP 할당
  * 라우터 연결
    * 게이트 웨이 역할 : 외부 네트워크 연결
    * 외부 네트워크 : IP 기반 통신 (TCP/IP)
    * 내부 네트워크 : MAC 기반 (CSMA/CD)
  * 스위치
    * MAC 기반 통신 데이터 전달